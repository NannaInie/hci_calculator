<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HCI GenAI CO2st Calculator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #f4f4f4;
        }

        .calculator-container {
            width: 90%;
            max-width: 600px;
            background-color: white;
            border: 1px solid #ccc;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        input, select {
            width: calc(100% - 20px);
            padding: 8px;
            margin: 5px 0 10px 0;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        button {
            padding: 10px 20px;
            background-color: #007BFF;
            border: none;
            border-radius: 4px;
            color: white;
            font-weight: bold;
            cursor: pointer;
        }

        button:hover {
            background-color: #0056b3;
        }

        #jobs-list {
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            background-color: #f9f9f9;
        }

        .job-item {
            margin-bottom: 20px;
            padding: 10px;
            background-color: #e9ecef;
            border-radius: 4px;
            font-size: 0.8em;
        }

        #result {
            margin-top: 20px;
            padding: 15px;
            border: 2px solid #28a745;
            border-radius: 4px;
            background-color: #d4edda;
            color: #155724;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="calculator-container">
        <h1>HCI GenAI CO2st Calculator</h1>

        <div class="form-group">
            <label for="use-case">Select Research Phase:</label>
            <select id="use-case" required>
                <option value="research-planning">Research & Planning</option>
                <option value="prototyping-building">Prototyping & Building</option>                
                <option value="training-fine-tuning">Training & Fine-tuning</option>
                <option value="evaluation-user-studies">Evaluation & User Studies</option>
                <option value="data-collection">Data Collection</option>
            </select>
        </div>

        <div class="form-group">
            <label for="specific-task">Select Type of Use:</label>
            <select id="specific-task" required></select>
        </div>

        <div class="form-group">
            <label for="specific-model">Select Type of Model:</label>
            <select id="specific-model" required></select>
        </div>
        
        <div id="dynamic-parameters"></div>

        <button id="add-job">Add Use Case</button>
        <div id="jobs-list"></div>

        <button id="calculate">Calculate Total Carbon Footprint</button>
        <div id="result"></div>
    </div>
    
    <script>
        const jobs = [];
        const optionsHierarchy = {
            "research-planning": {
                "literature-review-or-search": {
                    "Text-to-Text": [
                        { id: "num-papers", label: "Number of articles/documents processed", type: "number", min: 1, default: 5 },
                        { id: "learning-rate", label: "Learning Rate", type: "number", min: 0.0001, max: 0.01, step: 0.0001, default: 0.001 }
                    ]
                },
                "generation-of-materials-for-user-study": {
                    "Text-to-Text": [
                        { id: "prompt-length", label: "Average length of prompts (in words)", type: "number", min: 1, default: 50 },
                        { id: "num-prompts", label: "Number of prompts", type: "number", min: 1, default: 10 }
                    ], 
                    "Text-to-Image": [
                        { id: "num-images", label: "Number of images generated", type: "number", min: 1, default: 50 },
                        { id: "img-res", label: "Resolution of images", type: "number", min: 1, default: 512 }
                    ]
                }
            },
            "training-fine-tuning": {
                "custom-dataset": {
                    "BERT": [
                        { id: "num-epochs", label: "Number of Epochs", type: "number", min: 1, default: 20 },
                        { id: "batch-size", label: "Batch Size", type: "number", min: 1, default: 32 }
                    ]
                }
            }
        };

        function populateTasks(phase) {
            const taskSelect = document.getElementById('specific-task');
            taskSelect.innerHTML = '';

            const tasks = Object.keys(optionsHierarchy[phase] || {});
            tasks.forEach(task => {
                const option = document.createElement('option');
                option.value = task;
                option.textContent = task.replace(/-/g, ' ').replace(/\b\w/g, c => c.toUpperCase());
                taskSelect.appendChild(option);
            });

            taskSelect.dispatchEvent(new Event('change'));
        }

        function populateModels(phase, task) {
            const modelSelect = document.getElementById('specific-model');
            modelSelect.innerHTML = '';

            const models = Object.keys((optionsHierarchy[phase] || {})[task] || {});
            models.forEach(model => {
                const option = document.createElement('option');
                option.value = model;
                option.textContent = model;
                modelSelect.appendChild(option);
            });

            modelSelect.dispatchEvent(new Event('change'));
        }

        function populateParameters(phase, task, model) {
            const paramsDiv = document.getElementById('dynamic-parameters');
            paramsDiv.innerHTML = '';

            const params = optionsHierarchy[phase]?.[task]?.[model] || [];
            params.forEach(param => {
                const paramDiv = document.createElement('div');
                paramDiv.classList.add('form-group');

                const label = document.createElement('label');
                label.htmlFor = param.id;
                label.textContent = param.label;

                const input = document.createElement('input');
                input.id = param.id;
                input.type = param.type;
                input.min = param.min;
                if (param.step) input.step = param.step;
                input.value = param.default || param.min;

                paramDiv.appendChild(label);
                paramDiv.appendChild(input);
                paramsDiv.appendChild(paramDiv);
            });
        }

        document.getElementById('use-case').addEventListener('change', function () {
            const phase = this.value;
            populateTasks(phase);
        });

        document.getElementById('specific-task').addEventListener('change', function () {
            const phase = document.getElementById('use-case').value;
            const task = this.value;
            populateModels(phase, task);
        });

        document.getElementById('specific-model').addEventListener('change', function () {
            const phase = document.getElementById('use-case').value;
            const task = document.getElementById('specific-task').value;
            const model = this.value;
            populateParameters(phase, task, model);
        });

        window.onload = function() {
            const phase = document.getElementById('use-case').value;
            populateTasks(phase);
        };
    </script>
</body>
</html>

